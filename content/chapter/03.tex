%!TEX root = ../../main.tex

\chapter{Marktanalyse}\label{cp:marktanalyse}
Wie bereits erwähnt gibt es viele Programme, die einen Schachspieler beim Erlernen von Schacheröffnungen unterstützen können. In diesem Kapitel wird zuerst betrachtet, welche Lernplattformen es gibt und ob es in dem aktuellen Angebot Defizite gibt, die durch ein neues Programm ausgeglichen werden können. Anschließend findet ein Vergleich von Schachengines und von Datenbanken statt unter der Betrachtung, welche am besten in dieses Projekt eingebunden werden können.


\section{Lernplattformen}
Wenn man bereit ist Geld auszugeben, kann man sich zwischen einigen unterschiedlichen online Lernplattformen entscheiden. Bei kostenlosen Plattformen ist die Auswahl kleiner. Die Plattformen haben einige Gemeinsamkeiten, aber auch zum Teil größere Unterschiede. In diesem Abschnitt werden die kostenpflichtigen Plattformen Chess.com und Chessable und die kostenlose Plattform Lichess verglichen.

\subsection{Chess.com}
Chess.com ist mit über 100 Millionen Mitgliedern eine der größten Schachplattformen im Internet \cite{chesscom_chesscom_2022}. Neben der Möglichkeit gegen andere Mitspieler oder Computergegner zu spielen gibt es auch interaktive Lektionen, um Schach zu erlernen. Einige darunter fokussieren sich dafür auf Eröffnungen. Um Zugriff auf die Lektionen zu bekommen, muss ist allerdings ein kostenpflichtiges Abonnement für aktuell 4,17€ pro Monat notwendig. Die Lektionen sind immer ähnlich aufgebaut. Am Anfang wird ein erklärendes Video gezeigt. Anschließend werden bestimmte Teile der Eröffnung abgefragt. Dadurch, dass in einem Video mehrere Varianten einer Eröffnung erklärt werden, können diese relativ lang werden. Außerdem kann es auch nachteilhaft sein, dass nicht die gesamte Eröffnung abgefragt wird, sondern nur bestimmte Ausschnitte. Auf der Seite gibt es auch die Möglichkeit seine vergangenen Spiele zu analysieren. Ein Teil der Analyse steht kostenfrei zur Verfügung. Insgesamt ist die Interaktivität der Kurse etwas begrenzt.

\subsection{Lichess}
Lichess ist eine vollständig kostenlose Plattform. Auf der Seite gibt es offizielle interaktive Kurse um Grundlagen oder fortgeschrittenere Themen zu lernen. Eröffnungen kann man über die sogenannten Studien lernen. Das sind Kurse, die von anderen Benutzern erstellt wurden. Dadurch variieren sie auch in der Qualität und es ist nicht für jede Eröffnung ein guter Kurs vorhanden. Auch bei Lichess hat man die Möglichkeit seine vergangenen Partien zu analysieren.

\subsection{Chessable}
Chessable ist eine Seite, die betont, dass sie durch wissenschaftliche Erkenntnisse das Lernen so einfach wie möglich gestalten wollen \cite{prof_barry_hymer_science_nodate}. Im Zentrum steht dabei Spaced Repetition. Die Seite besitzt auch spielerische Elemente, wie zum Beispiel Belohnungen in Form von Punkten und Abzeichen.
Dadurch soll Dopamin ausgeschüttet werden, was den Lerneffekt erhöht.
Die Kosten von Chessable bieten allerdings weniger Grund zur Dopaminausschüttung.
Ohne Geld auszugeben, hat man nur eine kleine Auswahl an Kursen und Funktionen.
Für 11,99\$ kann man ein monatliches Abonnement abschließen, das Zugriff auf viele Funktionen und Kurse gibt. Des Weiteren gibt es die Möglichkeit einzelne Kurse zu kaufen, darunter einige mit Kosten von über 100\$.
% Es gibt zum einen die Möglichkeit ein Abonnement für 11,99\$ abzuschließen und so Zugriff auf viele Funktionen und Kurse zu bekommen, zum anderen kann man auch einzelne Kurse kaufen. Diese Kurse können teuer werden, einige sind über 100\$.
Sie sind meistens so gestaltet, dass ein Zug vorgeführt und erklärt wird. Anschließend spielt man selbst den Zug nach. Am Ende einer Variante wird die gesamte Zugabfolge abgefragt. Es wird also gelernt durch die Imitation des Gesehenen und durch Wiederholung.
Bei Chessable ist positiv hervorzuheben, dass sie einen Fokus darauf gesetzt haben wissenschaftliche Erkenntnisse mit einzubeziehen, um das Lernen so einfach wie möglich zu gestalten. Die Plattform ist für Einsteiger allerdings verhältnismäßig teuer, vor allem wenn man neben dem Abonnement zusätzliche Kurse kaufen will.

\subsection{Ergebnis}
Die betrachteten Plattformen bieten verschiedene Vor- und Nachteile. Lichess ist weniger personalisiert, hat ein begrenztes Angebot an Kursen, ist aber im Gegensatz zu Chess.com und Chessable kostenfrei. Chess.com ist eine etablierte Marke und bietet einige interaktive Kurse, die das Lernen erleichtern. Die Personalisierung ist allerdings begrenzt. Chessable hat am meisten Personalisierung und auch am meisten Anreize das Lernen attraktiv zu machen durch Punkte, Abzeichen und Spaced-Repetition. Es ist allerdings auch die Seite mit den höchsten Preisen.
Unser Programm kann hierbei eine kostenlose Alternative bieten, die auch personalisiert den Lernfortschritt in unterschiedlichen Eröffnungen zeigt.

\section{Schachengines}
Mittlerweile existieren sehr viele Schachengines, die leicht unterschiedliche Algorithmen implementieren.
Einen Startpunkt für den Vergleich der Engines bietet der \ac{TCEC}. In diesem Turnier treten unterschiedliche Schachengines in mehreren Spielen gegeneinander an. Der Sieger einer Saison wird  \ac{TCEC} Champion. In der Vergangenheit waren die Engines Stockfish, LCZero, Komodo und Houdini Champions. \cite{tcec_chessdom_tcec-chess_2025}

Ein weiterer Anhaltspunkt sind die \acf{CCRL}, eine Sammlung an Statistiken, welche die meisten Schachengines abdeckt. \cite{ccrl_team_ccrl_2025}
\autoref{tab:engines} zeigt vier Engines mit ihrer Anzahl an \ac{TCEC}-Siegen und ihrer Elo-Bewertung laut \ac{CCRL}.

\begin{table}[h]
    \centering
    \begin{tabular}{|c|l|c|c|c|}
        \hline
        Engine & Algorithmus & Elo & Siege & kostenfrei \\
        \hline
        Stockfish & Alpha-Beta + \acs{NNUE} & 3642 & 13 & ja \\
        \hline
        Komodo & \acs{MCTS} + \acs{NNUE} & 3626 & 4 & nein \\
        \hline
        LCZero & \acs{MCTS} & 3443 & 2 & ja \\
        \hline
        AlphaZero & \acs{MCTS} & - & - & nein \\
        \hline
    \end{tabular}
    \caption{Schachengines}
    \label{tab:engines}
\end{table}

\subsection{AlphaZero}
AlphaZero war ein Forschungsprojekt, dass in \autoref{cp:alphazero} näher beschrieben wurde. Die Engine wurde hauptsächlich für Forschungszwecke entwickelt und ist nicht frei zur Verwendung verfügbar. Es haben sich allerdings einige andere Entwickler an den Forschungsergebnissen der Engine orientiert und ähnliche Engines entwickelt.

\subsection{LCZero}
LCZero ist ausgeschrieben Leela Chess Zero und wird auch mit dem Namen lc0 bezeichnet. Diese Engine verwendet den gleichen Ansatz, wie AlphaZero mit ein paar Anpassungen. Sie arbeitet also mit einem Neuralen Netzwerk um die besten Züge herauszufinden. Im Gegensatz zu AlphaZero kann jeder LCZero mit einem vortrainierten Neuralen Netz herunterladen und über \ac{UCI} verwenden.
\cite{noauthor_neural_2020}

\subsection{Komodo}
Komodo gewann vor ein paar Jahren einige \ac{TCEC}. Die Engine wird von Chess.com verwendet für Computergegner mit unterschiedlicher Stärke. Seit Version 12 ist in Komodo eine \ac{MCTS}-Engine integriert. Die neuesten Versionen heißen Komodo Dragon und verwenden zusätzlich ein \ac{NNUE}. Die Engine wird über \ac{UCI} angesteuert. Die neuesten Versionen sind allerdings kostenpflichtig.
\cite{wikipedia_foundation_inc_komodo_2024}

\subsection{Stockfish}
Stockfish verwendet Alpha-Beta-Pruning um die besten Züge herauszufinden. Früher wurden die Schachpositionen durch eine handgeschriebene Evaluationsfunktion bewertet. Mittlerweile wurde diese Funktion durch ein \ac{NNUE} ersetzt, was Stockfish deutlich verbesserte. Die Engine wird oft als die stärkste Schachengine angesehen. Sie hat auch die meisten \ac{TCEC} gewonnen. Die letzten sechs Saisons blieb sie ungeschlagen. Stockfish ist kostenlos verfügbar und kann über \ac{UCI} verwendet werden.
\cite{wikipedia_foundation_inc_stockfish_2025}

\subsection{Auswahl}
Für dieses Projekt eignet sich Stockfish am besten. Sie ist aktuell die stärkste Schachengine und kostenlos verwendbar. Sie kann von der Stärke auch angepasst werden und über \ac{UCI} angesteuert werden. Das macht sie geeignet, um sie in ein anderes Programm einzubinden.

\section{Eröffnungssammlungen}
Damit die Eröffnungen in unserem Programm geübt werden können, müssen sie auch dort hinterlegt sein. Welche Eröffnungssammlungen existieren und wie gut sie für eine Lernanwendung verwendet werden können, wird in diesem Kapitel beschrieben.

\subsection{Encyclopedia of Chess Openings}
Die Encyclopedia of Chess Openings ist eine der bekanntesten Sammlungen von Schacheröffnungen. Sie wurde erstellt, um den aktuellen Stand der Eröffnungstheorie festzuhalten.
Die Editoren, von denen die meisten Großmeister sind, wählten aus den Partien von Schachmeistern die Züge aus, die sie für bedeutend hielten. Die Eröffnungen wurden in die fünf Kategorien A bis E aufgeteilt, für die jeweils ein Buch veröffentlicht wurde. Die Kategorien sind wiederum unterteilt in hundert nummerierte Unterkategorien. Die Kategorien und ihre Nummern werden auch ECO Codes genannt.
\cite{wikipedia_foundation_inc_encyclopaedia_2024}

Mit dieser Sammlung wären die wichtigsten Eröffnungen abgedeckt. Allerdings ist die Encyclopedia of Chess Openings in erster Linie eine Buchreihe, in der die Eröffnungen in Tabellenform dargestellt wird mit textuellen Beschreibungen in natürlicher Sprache. Um die Eröffnungen in einem Programm zu verwenden, müssen sie in maschinenlesbarer Form vorliegen.

\subsection{Eröffnungsdatenbanken}
Eröffnungsdatenbanken werden auch Opening Explorer genannt. Sie besitzen Datensätze von vielen vergangenen Schachpartien. In der Benutzeroberfläche kann man betrachten, welche Züge wie häufig in diesem Datensatz gespielt wurden und wie oft schwarz oder weiß nach dieser Kombination gewonnen hat. 
% ChessBase ist das bekannteste Beispiel für eine solche Datenbank. Die meisten Funktionen von ChessBase verlangen allerdings ein Abonnement. Andere Seiten, wie Chess.com und Lichess bieten einen Teil der Funktionen auch kostenlos an.

Eröffnungsdatenbanken sind ein nützliches Werkzeug, um sein Wissen über bekannte Eröffnungen zu vertiefen und zu erfahren, welche Varianten häufig gespielt werden. Sie sind allerdings nicht dafür gedacht, neue Schacheröffnungen zu erlernen. Sie können auch nicht in ein anderes Programm eingebunden werden, da sie meist nur eine grafische Schnittstelle besitzen und keine \ac{API}.

\subsection{Eröffnungsbücher für Computer}
Die Datensätze hinter den Eröffnungsdatenbanken werden als Eröffnungsbücher bezeichnet. Sie werden oft von Schachengines genutzt, um in den Anfangszügen Rechenleistung und Zeit zu sparen. Es gibt sie in Binär- und Textformaten. Die Binärformate sind häufig nicht vollständig dokumentiert, mit der Ausnahme von Polyglott. Die Textformate sind meist in \ac{PGN}.
Bei dieser Notation werden die Züge in der verkürzten algebraischen Notation festgehalten. Die algebraische Notation ist die Notation, die auch in Eröffnungsbüchern für Menschen genutzt werden.
\cite{wikipedia_foundation_inc_chess_2025}

Im Internet kann man einige kostenlose Polyglott- oder PGN-Eröffnungsbücher finden. Diese haben nicht unbedingt denselben Umfang wie in kostenpflichtigen Datenbanken, können aber dennoch verwendet werden, um selber eine Eröffnungsdatenbank zu implementieren. Für ein Programm zum Erlernen von Schacheröffnungen ist es allerdings nicht notwendig mehrere Millionen von vergangenen Partien zu speichern und zu analysieren. Eine Liste mit den häufigsten Eröffnungen und ihren Varianten wäre bereits ausreichend.
% Außerdem ist auch nicht eindeutig, wo eine Eröffnung endet, da sich in den Dateien immer vollständige Spiele befinden.

\subsection{Eröffnungslisten}
Es existieren auch einige Eröffnungslisten, die keine vollständigen Partien enthalten, sondern nur die Eröffnungen. \cite{omur_yanikoglu_ecojson_2025} ist zum Beispiel eine Sammlung an Eröffnungen im JSON-Format. Sie enthält Eröffnungen aus der Encyclopedia of Chess Openings, der SCID Sammlung und von Wikipedia. Als Basis dient wiederum die Sammlung \cite{lichessorg_chess-openings_2025} von Lichess. Diese enthält die Eröffnungen der Encyclopedia of Chess Openings in TSV-Dateien, die den ECO-Code, den englischen Namen, die Zugfolge in \ac{PGN} und \ac{UCI}-Notation und die Endposition enthälten.

Die Sammlung von Lichess ist in einem Format, das relativ gut für eine Lernanwendung geeignet ist. Sie ist mit 3514 Eröffnungen allerdings sehr umfangreich und sollte noch gefiltert werden. Es gibt in der Datenstruktur auch keine direkte Gruppierung für die Eröffnungsfamilien. Die Familien können aber durch den englischen Namen erkannt werden. Er besitzt die Struktur \lstinline{Familie: Variation, Untervariation, ...}. Ein weiteres Problem ist, dass es keine eindeutigen IDs gibt. Es wird zwar zu jeder Eröffnung der ECO-Code angegeben, dieser ist aber nicht eindeutig. Auch der englische Name erlaubt keine eindeutige Identifikation. 

\subsection{Angepasste Eröffnungsliste}
\label{cp:opening list}
Wie im vorigen Kapitel gesehen wurde, können die gefundenen Eröffnungslisten nicht sofort verwendet werden. Sie müssen erst gefiltert werden, damit die Anwendung nicht unübersichtlich wird und es müssen Daten ergänzt werden, wie die Eröffnungsfamilie und eine ID.

Die Zuordnung der Eröffnungsfamilien kann über den englischen Namen der Eröffnung gelöst werden. Alle, die zur selben Familie gehören, beginnen mit demselben Namen. Die Eröffnungen können also danach gruppiert werden.

Für die anderen beiden Probleme gibt es mehrere Lösungsmöglichkeiten. Um beide Probleme gleichzeitig zu lösen, könnte man pro ECO-Code eine Eröffnung auswählen. Danach hat man noch 500 Eröffnungen, was immer noch eine große Auswahl ist. Um herauszufinden welche Eröffnung am relevantesten ist könnte man entweder vergleichen welche Eröffnungen in Büchern typischerweise beschrieben werden oder in einer Eröffnungsdatenbank nachschauen, welche Eröffnungen am häufigsten gespielt werden. Diese Optionen sind allerdings beide sehr zeitaufwendig und bei der Anzahl an Eröffnungen würde es mehrere Monate dauern alle Eröffnungen zu untersuchen. Für den ersten Prototyp könnte man stattdessen als Auswahlkriterium bei gleichem ECO-Code immer die erste Variation wählen, eine zufällige oder die Variation mit den meisten Zügen. Falls nicht so viele Eröffnungsvariationen gefiltert werden sollen, kann man auch pro Name eine Eröffnung auswählen und den Hash des Namens als ID verwenden. Hier bieten sich dieselben Auswahlkriterien an. Man kann die große Anzahl an Eröffnungen auch als Vorteil sehen und die Liste nicht verkleinern. In diesem Fall ist es möglich die Eröffnungen der Reihe nach durchzunummerieren, um eine eindeutige ID zu bekommen.
